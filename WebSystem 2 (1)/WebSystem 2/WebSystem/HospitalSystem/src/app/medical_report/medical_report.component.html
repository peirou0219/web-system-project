<div class="dashboard-container">
  <div class="main-content">
    <div class="top-bar">
      <h2>Medical Report System</h2>
      <div class="user-info">
        <span id="currentTime"></span>
        <span class="user-name">Healthcare Provider</span>
      </div>
    </div>

    <div class="content-section">
      <!-- Medical Report Form -->
      <div class="form-container" id="medicalReportForm">
        <div class="form-header">
          <h3>Medical Report Form</h3>
          <div class="form-actions">
            <button class="action-btn" (click)="clearForm()">
              <i class="ri-close-line"></i> Clear
            </button>
          </div>
        </div>

        <form [formGroup]="medicalReportForm">
          <!-- Report Information Section -->
          <div class="form-section">
            <h4 class="section-title">Report Information</h4>
            <div class="form-grid">
              <div class="form-group">
                <label>Report ID:</label>
                <div class="input-with-icon">
                  <i class="ri-file-list-3-line"></i>
                  <input type="text" id="reportId" formControlName="reportId" placeholder="Enter Report ID (M followed by 4 numbers)" required>
                </div>
                <div *ngIf="medicalReportForm.get('reportId')?.invalid && medicalReportForm.get('reportId')?.touched" class="error-message">
                  <small *ngIf="medicalReportForm.get('reportId')?.errors?.['required']">Report ID is required</small>
                  <small *ngIf="medicalReportForm.get('reportId')?.errors?.['pattern']">Report ID must start with 'M' followed by 4 numbers (e.g., M1234)</small>
                </div>
              </div>

              <div class="form-group">
                <label>Patient ID:</label>
                <div class="input-with-icon">
                  <i class="ri-user-3-line"></i>
                  <input type="text" id="patientId" formControlName="patientId" placeholder="Enter Patient ID" required>
                </div>
                <div *ngIf="medicalReportForm.get('patientId')?.invalid && medicalReportForm.get('patientId')?.touched" class="error-message">
                  <small *ngIf="medicalReportForm.get('patientId')?.errors?.['required']">Patient ID is required</small>
                  <small *ngIf="medicalReportForm.get('patientId')?.errors?.['pattern']">Patient ID must be in the correct format</small>
                </div>
              </div>

              <div class="form-group">
                <label>Doctor's Name:</label>
                <div class="input-with-icon">
                  <i class="ri-user-line"></i>
                  <input type="text" id="doctorName" formControlName="doctorName" placeholder="Enter Doctor's Name" required>
                </div>
                <div *ngIf="medicalReportForm.get('doctorName')?.invalid && medicalReportForm.get('doctorName')?.touched" class="error-message">
                  <small>Doctor's Name is required</small>
                </div>
              </div>

              <div class="form-group">
                <label>Date of Report:</label>
                <div class="input-with-icon">
                  <i class="ri-calendar-line"></i>
                  <input type="date" id="reportDate" formControlName="reportDate" required>
                </div>
                <div *ngIf="medicalReportForm.get('reportDate')?.invalid && medicalReportForm.get('reportDate')?.touched" class="error-message">
                  <small>Report Date is required</small>
                </div>
              </div>

              <!-- Diagnosis field with Angular Material -->
              <div class="form-group full-width">
                <mat-form-field appearance="outline" class="full-width">
                  <mat-label>Diagnosis</mat-label>
                  <textarea matInput formControlName="diagnosis" placeholder="Enter Diagnosis" rows="3" required></textarea>
                  <mat-error *ngIf="medicalReportForm.get('diagnosis')?.invalid && medicalReportForm.get('diagnosis')?.touched">
                    Diagnosis is required
                  </mat-error>
                </mat-form-field>
              </div>

              <!-- Treatment field with Angular Material -->
              <div class="form-group full-width">
                <mat-form-field appearance="outline" class="full-width">
                  <mat-label>Treatment</mat-label>
                  <textarea matInput formControlName="treatment" placeholder="Enter Treatment" rows="3" required></textarea>
                  <mat-error *ngIf="medicalReportForm.get('treatment')?.invalid && medicalReportForm.get('treatment')?.touched">
                    Treatment information is required
                  </mat-error>
                </mat-form-field>
              </div>
            </div>
          </div>
        </form>

        <div class="button-group">
          <button class="submit-btn" (click)="saveForm()">
            <i class="ri-save-line"></i> Submit Report
          </button>
          <button class="update-btn" (click)="updateForm()" style="display: none;">
            <i class="ri-edit-line"></i> Update Report
          </button>
          <button class="delete-btn" (click)="deleteForm()" style="display: none;">
            <i class="ri-delete-bin-line"></i> Delete Report
          </button>
        </div>
      </div>

      <!-- Medical Report List Section -->
      <div class="form-list-section">
        <div class="list-header">
          <h3>Existing Medical Reports</h3>
          <div class="list-actions">
            <div class="search-bar">
              <i class="ri-search-line"></i>
              <input type="text" id="searchReport" placeholder="Search reports..." (keyup)="searchReports()">
            </div>
          </div>
        </div>
        <div class="form-list" id="formList">
          <!-- Reports will be populated here -->
        </div>
      </div>
    </div>
  </div>
</div>